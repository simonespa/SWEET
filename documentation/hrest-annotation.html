<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<link rel="stylesheet" type="text/css" href="stylesheet.css" />
		<script type="text/javascript" src="javascript/navigator.js"></script>
		<title>MicroWSMO Editor | hREST Annotation</title>
	</head>
	<body onload="showNavigator();">
	
		<div id="navigator" class="linkable">
			<!-- a navigator will be inserted dinamycally by a javascript function -->
		</div>
		
		<div align="center" class="title">hREST Annotation Details</div><br />
		In this phase, we will tag the web service document, with the hREST tags. Belov there is the detailed
		explanation about the steps that we must follow.
		
		<ol class="step-description">
			<li>
				An <a class="linkable" href="files/hrestAnnotation.xml">XML file</a> is generated beginning from the (X)HTML showed page.
				This new file is generated by a transformation of an <a class="linkable" href="files/xhtml2xml.xslt">XSLT file</a>.
				The xml file describes the schema of the hREST tag used in the web page. In this first phase, as well as to generate
				this file, it will be checked that the web page is well formed.
			</li>
			<li>
				The just generated xml file is parsed and is validated on the basis of the grammar described by the 
				ad-hoc <a class="linkable" href="files/hrestSchema.xsd">XML Schema</a>. This grammar is compliant with
				the hREST requirements. In this phase will be checked if all the tag added to the web service description
				will be used according to the hREST microformat.
			</li>
			<li>
				If the first two phases are ok, the web page will be showed. If it just contain some hREST tag, a CSS file
				will point out its presence.<br /> 
			</li>
		</ol>
		
		<p class="description">
			The user can annotates the web services, simpply highlighting the wished part of text and doing
			a double click on the relative hREST tag in the tree view structure on the left side of the editor.
			The user can annotates also by a right-click, choosing the corresponding hREST tag in the context menu.
		</p>
		
		<br />
		<div align="center" class="middle-title">EVENT Details</div><br />
		
		<h2>hREST tags Panel</h2>
		<p class="description">
			Is the panel on the left side of the editor. It contains the tree view
			of the hREST tags. By the elements of this panel is possible to annotate
			the web service description.
		</p>
		<ul class="event-description">
			<li>
				<span class="emphasis">Double Click EVENT</span>
				<p></p>
				<ol>
					<li>
						The ID of the item that generates this event, is retrieved.
					</li>
					<li>
						On the basis of the retrieved ID, will be inserted a string into the html code
						in the right position. The modification (editing) is applyed on a copy of the DOM, in this
						way will be possible an UNDO operation.   
					</li>
					<li>
						A new xml file is generated and is parsed. If happen some error, a message box
						is showed to warn the user.
					</li>
					<li>
						The <span class="emphasis">update</span> function is called back. It will update the state of
						the GUI if and only if the parsing phase is ok. In detail:
						<ol>
							<li>
								Enables the hREST tags if the selected items are <span class="emphasis">service</span>
								or <span class="emphasis">operation</span>
							</li>
							<li>
								The appropriate tags are added to the hREST DOM panel.
							</li>
						</ol>
					</li>
				</ol>
				<p class="description emphasis">
					NOTE: The tree will not be collapsible. In this way, each time a double click
					is fired onto an item tree which have the children, the branch will not collapse.
					This event will be fired only if the double click is did onto the tree item. 
				</p>
			</li>
		</ul>
		
		<h2>hREST DOM Panel</h2>
		<p class="description">
			This panel is also on the left side of the editor, under the hREST tags panel. This
			component contain the tree that describe the indentation of the hREST tags inside the
			web page. By a context men&ugrave; the user can deletes the tags.
		</p>
		<ul class="event-description">
			<li>
				<span class="emphasis">Right Click EVENT</span>
				<p></p>
				<ol>
					<li>
						A context menu is showed
					</li>
				</ol>
				<p class="emphasis">
					NOTE: this event is generated only if the user clicks onto the tree items
				</p>
			</li>
		</ul>
		
		<h2>HTML Viewer Panel</h2>
		<p class="description">
			This is the viewer of the web service description. In this panel the user can
			select the text and annotate the service by the hREST tag elements or by a context
			menu that pop up over the web page.
		</p>
		<ul class="event-description">
			<li>
				<span class="emphasis">Right Click EVENT</span>
				<p></p>
				<ol>
					<li>
						A context menu is showed
					</li>
				</ol>
				<p class="emphasis">
					NOTE: this event have to be fired only if some think in the page is selected.
				</p>
			</li>
		</ul>
		
		<h2>hREST DOM Context Menù</h2>
		<p class="description">
			Is the context men&ugrave; which pop up when the user right-click onto the tree's item
			into the hREST DOM panel.
		</p>
		<ul class="event-description">
			<li>
				<span class="emphasis">Selection EVENT</span>
				<p></p>
				<ol>
					<li>
						The only one option present in this context men&ugrave; is "<span class="emphasis">delete</span>".
						When the user click onto this button, the ID of the item is retrieved and is used to delete the tag
						into the html code. If the ID corresponds to an item that have children (sub items), the system
						have to delete all the children and do the operation described above, for each of them.
					</li>
					<li>
						A new xml file is generated. In this case is not necessary to parse, because the xml file already
						exist and it is well formed and valid. The deleting operation can't brake the code integrity.
					</li>
					<li>
						The <span class="emphasis">update</span> function is called back. It will update the state of
						the GUI.
						<ol>
							<li>
								Disables the hREST tags that are no more in the web page.
							</li>
							<li>
								The appropriate tags are deleted from the hREST DOM panel.
							</li>
						</ol>
					</li>
				</ol>
				<p class="emphasis">
					
				</p>
			</li>
		</ul>
		
		<h2>HTML Viewer Context Menù</h2>
		<p class="description">
			Is the context men&ugrave; which pop up when the user right-click onto the selected text
			into the html viewer panel. This context men&ugrave; contains the same hREST tag elements
			of the tree view. Every option does the same operation of the item into the tree. In this
			context men&ugrave; there is also an option which call a library, which retrieve the ontologies
			for a given keyword. This API accept in input a string and return a list of ontologies where
			the string is stored.
		</p>
		<ul class="event-description">
			<li>
				<span class="emphasis">Selection EVENT</span>
				<p></p>
				<ol>
					<li>
						For all the hREST tag option, will be called the same listener
						of the tree's item view. The most important option is the "query"
						to the API called "Watson" which retrieve and return the URL of the
						ontologies of a given string (considered such as an item of an ontology). 
					</li>
				</ol>
			</li>
			<p></p>
		</ul>
		
		<h2>Save button</h2>
		<p class="description">
			This button is placed at the bottom of the left side panel.
		</p>
		<ul class="event-description">
			<li>
				<span class="emphasis">Selection EVENT</span>
				<p></p>
				<ol>
					<li>
						When this button is pressed, an HTML file is created. It will contains
						the page with the annotations added by the user. 
					</li>
				</ol>
			</li>
			<p class="emphasis">
					NOTE: the user can click this button every time he want. The only action
					this button will do is: savign the web page annotated in a local html file.
			</p>
		</ul>
		
	</body>
</html>